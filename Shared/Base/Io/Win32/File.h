///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// This software is supplied under the terms of a license agreement or
// nondisclosure agreement and may not be copied or disclosed except in
// accordance with the terms of that agreement.
//
// Copyright (c) 2004 Jesper Svennevid, Daniel Collin.
// All Rights Reserved.
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef zenic_win32_File_h
#define zenic_win32_File_h

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Includes
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "../../Types.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Class
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace zenic
{

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class File
{
public:

	enum Mode
	{
		Read,
		Write,
		Append
	};

	enum Location
	{
		Start,
		Current,
		End
	};

	typedef s64 Offset;
	typedef s32 Size;

	enum { InvalidSize = -1, InvalidOffset = -1 };

	File();
	~File();

	bool open(const char* filename, Mode mode);
	void close();

	bool isGood() const;
	bool isBad() const;
	bool isEof() const;

	Size read(void* buffer, Size size);
	Size write(const void* buffer, Size size);

	Offset seek(Location location, Offset offset);
	Offset tell() const;

private:

	void reset();

	void setGood(bool good);
	void setEof(bool eof);

	bool m_good:1;
	bool m_eof:1;

	void* m_file;
};

#include "File.inl"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}

#endif
