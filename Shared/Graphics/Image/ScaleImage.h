///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// This software is supplied under the terms of a license agreement or
// nondisclosure agreement and may not be copied or disclosed except in
// accordance with the terms of that agreement.
//
// Copyright (c) 2003-2005 Jesper Svennevid, Daniel Collin.
// All Rights Reserved.
//
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef zenic_ScaleImage_h
#define zenic_ScaleImage_h

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Includes
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include <Shared/Base/Types.h>

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Class
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace zenic
{

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class ScaleImage
{
public : 

	struct Pixel
	{
		float r;
		float g;
		float b;
		float a;
		float luma;
	};

	static bool run(Pixel* src, uint srcWidth, uint srcHeight, Pixel* dest, uint destWidth, uint destHeight);

private:

	// TODO: Rewrite to correct coding standard

	struct Dest
	{
		unsigned int m_uiDest;
		float m_fWeight;
	};

	struct Source
	{
		unsigned int m_uiSize;
		Dest m_kDest[1];
	};

	struct Kernel
	{
		unsigned int m_uiSize;
		Source m_kSource[1];
	};

	struct FilterRow
	{
		Pixel* m_pkPixels;
		float m_fWeight;
		FilterRow* m_pkNext;

		FilterRow();
		~FilterRow();
	};

	static unsigned char* CreateFilter(uint uiSrcLength, uint uiDestLength);
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


}

#endif
